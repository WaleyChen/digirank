if (typeof twilio == "undefined") { var twilio = {}; } twilio.realm = "prod"; /*
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(a){return a||(this.paused=!0),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide");this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c);e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e,f,g;if(c.is(".disabled, :disabled"))return;return f=c.attr("data-target"),f||(f=c.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),e=a(f),e.length||(e=c.parent()),g=e.hasClass("open"),d(),g||e.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var e=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},isHTML:function(a){return typeof a!="string"||a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.isHTML(b)?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.isHTML(b)?"html":"text"](b),a.find(".popover-content > *")[this.isHTML(c)?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&c.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu")&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c=this,d,e;return this.query=this.$element.val(),this.query?(d=a.grep(this.source,function(a){return c.matcher(a)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},keypress:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.type!="keydown")break;a.preventDefault(),this.prev();break;case 40:if(a.type!="keydown")break;a.preventDefault(),this.next()}a.stopPropagation()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery);;
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(window,undefined){'$:nomunge';var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=='boolean'){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}
function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);};function clear(){timeout_id=undefined;};if(debounce_mode&&!timeout_id){exec();}
timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}
return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false);};})(this);;$(function(){$('input[placeholder],textarea[placeholder]').placeholder();});;if(typeof twilio=="undefined"){var twilio={};}
twilio.analytics={event:function(title,properties){this.mixpanel.event(title,properties);this.kissMetrics.event(title,properties);},pageView:function(url){this.googleAnalytics(url);this.optimizely(url);this.kissMetrics.event(url);},identify:function(id){this.kissMetrics.identify(id);this.mixpanel.identify(id);},googleAnalytics:function(url){if(typeof _gaq=="undefined"){return;}
if(twilio.realm!="prod"){this.log('Google Analytics: '+url);return;}
_gaq.push(['_trackPageview',url]);},optimizely:function(url){if(typeof window.optimizely=="undefined"){return;}
if(twilio.realm!="prod"){this.log('Optimizely: '+url);return;}
window.optimizely.push(['trackEvent',url]);},mixpanel:{event:function(title,properties){if(typeof mixpanel=="undefined"){return;}
if(typeof properties=="undefined"){properties={};}
if(twilio.realm!="prod"){twilio.analytics.log('Mixpanel Event: '+title);twilio.analytics.log('Mixpanel Properties:');twilio.analytics.log(properties);}
mixpanel.track(title,properties);},identify:function(id){if(typeof mixpanel=="undefined"){return;}
if(typeof mixpanel.get_property=="undefined"){mixpanel.set_config({loaded:function(){twilio.analytics.mixpanel.identify(id);}});return;}
if(twilio.realm!="prod"){twilio.analytics.log('Mixpanel Identify: '+id);}
this.alias(id);mixpanel.identify(id);},alias:function(id){if(typeof mixpanel=="undefined"){return;}
var currentAlias=mixpanel.get_property('alias');if(!currentAlias||(currentAlias!=id)){if(twilio.realm!="prod"){twilio.analytics.log('Mixpanel Alias: '+id);}
mixpanel.register({'alias':id});mixpanel.alias(id);}}},kissMetrics:{event:function(title,properties){if(typeof _kmq=="undefined"){return;}
if(typeof properties=="undefined"){properties={};}
if(twilio.realm!="prod"){twilio.analytics.log('Kissmetrics Event: '+title);twilio.analytics.log('Kissmetrics Properties:');twilio.analytics.log(properties);return;}
_kmq.push(['record',title,properties]);},identify:function(id){if(typeof _kmq=="undefined"){return;}
if(twilio.realm!="prod"){twilio.analytics.log('Kissmetrics Identify: '+id);return;}
_kmq.push(['identify',id]);}},quantcast:function(event,order){if(twilio.realm!="prod"){this.log('Quantcast: '+event+', '+order);return;}
order=order?'&meta=orderID='+order:'';$('body').append($('<img src="//secure.quantserve.com/pixel/p-efmoRQHrDUXig.gif?labels='+event+order+'" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>'));},log:function(message){if(console){console.log(message);}}};;$(function(){if($.browser.msie){$('html').addClass('ie'+parseInt($.browser.version,10));}});;(function($){'use strict';var nav,slice=Array.prototype.slice;var I18N=function(options){this.options=$.extend({},I18N.defaults,options);this.parser=this.options.parser;this.locale=this.options.locale;this.messageStore=this.options.messageStore;this.languages={};this.init();};I18N.prototype={init:function(){var i18n;i18n=this;i18n.messageStore.init(i18n.locale);String.locale=i18n.locale;String.prototype.toLocaleString=function(){var localeParts,messageLocation,localePartIndex,value,locale,fallbackIndex;value=this.valueOf();locale=i18n.locale;fallbackIndex=0;while(locale){localeParts=locale.toLowerCase().split('-');localePartIndex=localeParts.length;do{var _locale=localeParts.slice(0,localePartIndex).join('-');if(i18n.options.messageLocationResolver){messageLocation=i18n.options.messageLocationResolver(_locale,value);if(messageLocation&&(!i18n.messageStore.isLoaded(_locale,messageLocation))){i18n.messageStore.load(messageLocation,_locale);}}
var message=i18n.messageStore.get(_locale,value);if(message){return message;}
localePartIndex--;}while(localePartIndex);if(locale==='en'){break;}
locale=($.i18n.fallbacks[i18n.locale]&&$.i18n.fallbacks[i18n.locale][fallbackIndex])||i18n.options.fallbackLocale;i18n.log('Trying fallback locale for '+i18n.locale+': '+locale);fallbackIndex++;}
return'';};},destroy:function(){$.removeData(document,'i18n');},load:function(data,locale){this.messageStore.load(data,locale);},log:function(){if(window.console&&$.i18n.debug){window.console.log.apply(window.console,arguments);}},parse:function(key,parameters){var message=key.toLocaleString();this.parser.language=$.i18n.languages[$.i18n().locale]||$.i18n.languages['default'];if(message===''){message=key;}
return this.parser.parse(message,parameters);}};$.i18n=function(key,param1){var parameters,i18n=$.data(document,'i18n'),options=typeof key==='object'&&key;if(options&&options.locale&&i18n&&i18n.locale!==options.locale){String.locale=i18n.locale=options.locale;}
if(!i18n){i18n=new I18N(options);$.data(document,'i18n',i18n);}
if(typeof key==='string'){if(param1!==undefined){parameters=slice.call(arguments,1);}else{parameters=[];}
return i18n.parse(key,parameters);}else{return i18n;}};$.fn.i18n=function(){var i18n=$.data(document,'i18n');String.locale=i18n.locale;if(!i18n){i18n=new I18N();$.data(document,'i18n',i18n);}
return this.each(function(){var $this=$(this);if($this.data('i18n')){var messageKey=$this.data('i18n'),message=messageKey.toLocaleString();if(message!==''){$this.text(message);}}else{$this.find('[data-i18n]').i18n();}});};String.locale=String.locale||$('html').attr('lang');if(!String.locale){if(typeof window.navigator!==undefined){nav=window.navigator;String.locale=nav.language||nav.userLanguage||'';}else{String.locale='';}}
$.i18n.languages={};$.i18n.messageStore=$.i18n.messageStore||{};$.i18n.parser={parse:function(message,parameters){return message.replace(/\$(\d+)/g,function(str,match){var index=parseInt(match,10)-1;return parameters[index]!==undefined?parameters[index]:'$'+match;});},emitter:{}};$.i18n.debug=false;I18N.defaults={locale:String.locale,fallbackLocale:'en',parser:$.i18n.parser,messageStore:$.i18n.messageStore,messageLocationResolver:null};$.I18N=I18N;}(jQuery));;(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj);};if(typeof module!=='undefined'&&module.exports){module.exports=_;_._=_;}else{root._=_;}
_.VERSION='1.1.6';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(_.isNumber(obj.length)){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});return results;};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=memo!==void 0;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial&&index===0){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return memo!==void 0?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var reversed=(_.isArray(obj)?obj.slice():_.toArray(obj)).reverse();return _.reduce(reversed,iterator,memo,context);};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return result;};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result=iterator.call(context,value,index,list))return breaker;});return result;};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;any(obj,function(value){if(found=value===target)return true;});return found;};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(method.call?method||value:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0;}),'value');};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid;}
return low;};_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return iterable;if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable);};_.size=function(obj){return _.toArray(obj).length;};_.first=_.head=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index);};_.last=function(array){return array[array.length-1];};_.compact=function(array){return _.filter(array,function(value){return!!value;});};_.flatten=function(array){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(_.flatten(value));memo[memo.length]=value;return memo;},[]);};_.without=function(array){var values=slice.call(arguments,1);return _.filter(array,function(value){return!_.include(values,value);});};_.uniq=_.unique=function(array,isSorted){return _.reduce(array,function(memo,el,i){if(0==i||(isSorted===true?_.last(memo)!=el:!_.include(memo,el)))memo[memo.length]=el;return memo;},[]);};_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,'length'));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};_.bind=function(func,obj){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)));};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args);};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait);};};_.throttle=function(func,wait){return limit(func,wait,false);};_.debounce=function(func,wait){return limit(func,wait,true);};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments);};};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments));return wrapper.apply(this,args);};};_.compose=function(){var funcs=slice.call(arguments);return function(){var args=slice.call(arguments);for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(hasOwnProperty.call(obj,key))keys[keys.length]=key;return keys;};_.values=function(obj){return _.map(obj,_.identity);};_.functions=_.methods=function(obj){return _.filter(_.keys(obj),function(key){return _.isFunction(obj[key]);}).sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(source[prop]!==void 0)obj[prop]=source[prop];}});return obj;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop];}});return obj;};_.clone=function(obj){return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};_.isEqual=function(a,b){if(a===b)return true;var atype=typeof(a),btype=typeof(b);if(atype!=btype)return false;if(a==b)return true;if((!a&&b)||(a&&!b))return false;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual)return a.isEqual(b);if(_.isDate(a)&&_.isDate(b))return a.getTime()===b.getTime();if(_.isNaN(a)&&_.isNaN(b))return false;if(_.isRegExp(a)&&_.isRegExp(b))
return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(atype!=='object')return false;if(a.length&&(a.length!==b.length))return false;var aKeys=_.keys(a),bKeys=_.keys(b);if(aKeys.length!=bKeys.length)return false;for(var key in a)if(!(key in b)||!_.isEqual(a[key],b[key]))return false;return true;};_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(hasOwnProperty.call(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType==1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,'callee'));};_.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply);};_.isString=function(obj){return!!(obj===''||(obj&&obj.charCodeAt&&obj.substr));};_.isNumber=function(obj){return!!(obj===0||(obj&&obj.toExponential&&obj.toFixed));};_.isNaN=function(obj){return obj!==obj;};_.isBoolean=function(obj){return obj===true||obj===false;};_.isDate=function(obj){return!!(obj&&obj.getTimezoneOffset&&obj.setUTCFullYear);};_.isRegExp=function(obj){return!!(obj&&obj.test&&obj.exec&&(obj.ignoreCase||obj.ignoreCase===false));};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i);};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name]);});};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};_.template=function(str,data){var c=_.templateSettings;var tmpl='var __p=[],print=function(){__p.push.apply(__p,arguments);};'+'with(obj||{}){__p.push(\''+
str.replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(c.interpolate,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'";}).replace(c.evaluate||null,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g,' ')+"__p.push('";}).replace(/\r/g,'\\r').replace(/\n/g,'\\n').replace(/\t/g,'\\t')
+"');}return __p.join('');";var func=new Function('obj',tmpl);return data?func(data):func;};var wrapper=function(obj){this._wrapped=obj;};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj;};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain);};};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){method.apply(this._wrapped,arguments);return result(this._wrapped,this._chain);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain);};});wrapper.prototype.chain=function(){this._chain=true;return this;};wrapper.prototype.value=function(){return this._wrapped;};})();;(function($){'use strict';var MessageParser=function(options){this.options=$.extend({},$.i18n.parser.defaults,options);this.language=$.i18n.languages[String.locale]||$.i18n.languages['default'];this.emitter=$.i18n.parser.emitter;};MessageParser.prototype={constructor:MessageParser,simpleParse:function(message,parameters){return message.replace(/\$(\d+)/g,function(str,match){var index=parseInt(match,10)-1;return parameters[index]!==undefined?parameters[index]:'$'+match;});},parse:function(message,replacements){if(message.indexOf('{{')<0){return this.simpleParse(message,replacements);}
this.emitter.language=$.i18n.languages[$.i18n().locale]||$.i18n.languages['default'];return this.emitter.emit(this.ast(message),replacements);},ast:function(message){var pos=0;function choice(parserSyntax){return function(){var i,result;for(i=0;i<parserSyntax.length;i++){result=parserSyntax[i]();if(result!==null){return result;}}
return null;};}
function sequence(parserSyntax){var i,res,originalPos=pos,result=[];for(i=0;i<parserSyntax.length;i++){res=parserSyntax[i]();if(res===null){pos=originalPos;return null;}
result.push(res);}
return result;}
function nOrMore(n,p){return function(){var originalPos=pos,result=[],parsed=p();while(parsed!==null){result.push(parsed);parsed=p();}
if(result.length<n){pos=originalPos;return null;}
return result;};}
function makeStringParser(s){var len=s.length;return function(){var result=null;if(message.substr(pos,len)===s){result=s;pos+=len;}
return result;};}
function makeRegexParser(regex){return function(){var matches=message.substr(pos).match(regex);if(matches===null){return null;}
pos+=matches[0].length;return matches[0];};}
var pipe=makeStringParser('|');var colon=makeStringParser(':');var backslash=makeStringParser('\\');var anyCharacter=makeRegexParser(/^./);var dollar=makeStringParser('$');var digits=makeRegexParser(/^\d+/);var regularLiteral=makeRegexParser(/^[^{}\[\]$\\]/);var regularLiteralWithoutBar=makeRegexParser(/^[^{}\[\]$\\|]/);var regularLiteralWithoutSpace=makeRegexParser(/^[^{}\[\]$\s]/);function transform(p,fn){return function(){var result=p();return result===null?null:fn(result);};}
function literalWithoutBar(){var result=nOrMore(1,escapedOrLiteralWithoutBar)();return result===null?null:result.join('');}
function literal(){var result=nOrMore(1,escapedOrRegularLiteral)();return result===null?null:result.join('');}
function escapedLiteral(){var result=sequence([backslash,anyCharacter]);return result===null?null:result[1];}
choice([escapedLiteral,regularLiteralWithoutSpace]);var escapedOrLiteralWithoutBar=choice([escapedLiteral,regularLiteralWithoutBar]);var escapedOrRegularLiteral=choice([escapedLiteral,regularLiteral]);function replacement(){var result=sequence([dollar,digits]);if(result===null){return null;}
return['REPLACE',parseInt(result[1],10)-1];}
var templateName=transform(makeRegexParser(/^[ !"$&'()*,.\/0-9;=?@A-Z\^_`a-z~\x80-\xFF+\-]+/),function(result){return result.toString();});function templateParam(){var result=sequence([pipe,nOrMore(0,paramExpression)]);if(result===null){return null;}
var expr=result[1];return expr.length>1?['CONCAT'].concat(expr):expr[0];}
function templateWithReplacement(){var result=sequence([templateName,colon,replacement]);return result===null?null:[result[0],result[2]];}
function templateWithOutReplacement(){var result=sequence([templateName,colon,paramExpression]);return result===null?null:[result[0],result[2]];}
var templateContents=choice([function(){var res=sequence([choice([templateWithReplacement,templateWithOutReplacement]),nOrMore(0,templateParam)]);return res===null?null:res[0].concat(res[1]);},function(){var res=sequence([templateName,nOrMore(0,templateParam)]);if(res===null){return null;}
return[res[0]].concat(res[1]);}]);var openTemplate=makeStringParser('{{');var closeTemplate=makeStringParser('}}');function template(){var result=sequence([openTemplate,templateContents,closeTemplate]);return result===null?null:result[1];}
var expression=choice([template,replacement,literal]);var paramExpression=choice([template,replacement,literalWithoutBar]);function start(){var result=nOrMore(0,expression)();if(result===null){return null;}
return['CONCAT'].concat(result);}
var result=start();if(result===null||pos!==message.length){throw new Error('Parse error at position '+pos.toString()+' in input: '+message);}
return result;}};$.extend($.i18n.parser,new MessageParser());}(jQuery));;$(function(){$('@post').on('click',function(e){if($(this).data('disabled')){return true;}
e.preventDefault();e.stopPropagation();var $this=$(this);var url=$this.attr('href')||$this.data('action');var xhr=$.post(url,$this.data());if($this.data('done')){xhr.done($this.data('done'));}else{xhr.done(function(data){if(data.location){window.location=data.location;}else if($this.data('redirect')){window.location=$this.data('redirect');}});}
if($this.data('fail')){xhr.fail($this.data('fail'));}});});;(function($){'use strict';var MessageParserEmitter=function(){this.language=$.i18n.languages[String.locale]||$.i18n.languages['default'];};MessageParserEmitter.prototype={constructor:MessageParserEmitter,emit:function(node,replacements){var ret,subnodes,operation,messageParserEmitter=this;switch(typeof node){case'string':case'number':ret=node;break;case'object':subnodes=$.map(node.slice(1),function(n){return messageParserEmitter.emit(n,replacements);});operation=node[0].toLowerCase();if(typeof messageParserEmitter[operation]==='function'){ret=messageParserEmitter[operation](subnodes,replacements);}else{throw new Error('unknown operation "'+operation+'"');}
break;case'undefined':ret='';break;default:throw new Error('unexpected type in AST: '+typeof node);}
return ret;},concat:function(nodes){var result='';$.each(nodes,function(i,node){result+=node;});return result;},replace:function(nodes,replacements){var index=parseInt(nodes[0],10);if(index<replacements.length){return replacements[index];}else{return'$'+(index+1);}},plural:function(nodes){var count=parseFloat(this.language.convertNumber(nodes[0],10)),forms=nodes.slice(1);return forms.length?this.language.convertPlural(count,forms):'';},gender:function(nodes){var gender=nodes[0],forms=nodes.slice(1);return this.language.gender(gender,forms);},grammar:function(nodes){var form=nodes[0],word=nodes[1];return word&&form&&this.language.convertGrammar(word,form);}};$.extend($.i18n.parser.emitter,new MessageParserEmitter());}(jQuery));;(function($){'use strict';var language={pluralRules:{gv:{one:'n mod 10 in 1..2 or n mod 20 is 0'},gu:{one:'n is 1'},rof:{one:'n is 1'},ga:{few:'n in 3..6',many:'n in 7..10',two:'n is 2',one:'n is 1'},gl:{one:'n is 1'},lg:{one:'n is 1'},lb:{one:'n is 1'},xog:{one:'n is 1'},ln:{one:'n in 0..1'},lo:'',brx:{one:'n is 1'},tr:'',ts:{one:'n is 1'},tn:{one:'n is 1'},to:'',lt:{few:'n mod 10 in 2..9 and n mod 100 not in 11..19',one:'n mod 10 is 1 and n mod 100 not in 11..19'},tk:{one:'n is 1'},th:'',ksb:{one:'n is 1'},te:{one:'n is 1'},ksh:{zero:'n is 0',one:'n is 1'},fil:{one:'n in 0..1'},haw:{one:'n is 1'},kcg:{one:'n is 1'},ssy:{one:'n is 1'},yo:'',de:{one:'n is 1'},ko:'',da:{one:'n is 1'},dz:'',dv:{one:'n is 1'},guw:{one:'n in 0..1'},shi:{few:'n in 2..10',one:'n within 0..1'},el:{one:'n is 1'},eo:{one:'n is 1'},en:{one:'n is 1'},ses:'',teo:{one:'n is 1'},ee:{one:'n is 1'},kde:'',fr:{one:'n within 0..2 and n is not 2'},eu:{one:'n is 1'},et:{one:'n is 1'},es:{one:'n is 1'},seh:{one:'n is 1'},ru:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},kl:{one:'n is 1'},sms:{two:'n is 2',one:'n is 1'},smn:{two:'n is 2',one:'n is 1'},smj:{two:'n is 2',one:'n is 1'},smi:{two:'n is 2',one:'n is 1'},fy:{one:'n is 1'},rm:{one:'n is 1'},ro:{few:'n is 0 OR n is not 1 AND n mod 100 in 1..19',one:'n is 1'},bn:{one:'n is 1'},sma:{two:'n is 2',one:'n is 1'},be:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},bg:{one:'n is 1'},ms:'',wa:{one:'n in 0..1'},ps:{one:'n is 1'},wo:'',bm:'',jv:'',bo:'',bh:{one:'n in 0..1'},kea:'',asa:{one:'n is 1'},cgg:{one:'n is 1'},br:{few:'n mod 10 in 3..4,9 and n mod 100 not in 10..19,70..79,90..99',many:'n mod 1000000 is 0 and n is not 0',two:'n mod 10 is 2 and n mod 100 not in 12,72,92',one:'n mod 10 is 1 and n mod 100 not in 11,71,91'},bs:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},ja:'',om:{one:'n is 1'},fa:'',vun:{one:'n is 1'},or:{one:'n is 1'},xh:{one:'n is 1'},nso:{one:'n in 0..1'},ca:{one:'n is 1'},cy:{few:'n is 3',zero:'n is 0',many:'n is 6',two:'n is 2',one:'n is 1'},cs:{few:'n in 2..4',one:'n is 1'},zh:'',lv:{zero:'n is 0',one:'n mod 10 is 1 and n mod 100 is not 11'},pt:{one:'n is 1'},wae:{one:'n is 1'},tl:{one:'n in 0..1'},chr:{one:'n is 1'},pa:{one:'n is 1'},ak:{one:'n in 0..1'},pl:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n is not 1 and n mod 10 in 0..1 or n mod 10 in 5..9 or n mod 100 in 12..14',one:'n is 1'},hr:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},am:{one:'n in 0..1'},ti:{one:'n in 0..1'},hu:'',hi:{one:'n in 0..1'},jmc:{one:'n is 1'},ha:{one:'n is 1'},he:{one:'n is 1'},mg:{one:'n in 0..1'},fur:{one:'n is 1'},bem:{one:'n is 1'},ml:{one:'n is 1'},mo:{few:'n is 0 OR n is not 1 AND n mod 100 in 1..19',one:'n is 1'},mn:{one:'n is 1'},mk:{one:'n mod 10 is 1 and n is not 11'},ur:{one:'n is 1'},bez:{one:'n is 1'},mt:{few:'n is 0 or n mod 100 in 2..10',many:'n mod 100 in 11..19',one:'n is 1'},uk:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},mr:{one:'n is 1'},ta:{one:'n is 1'},my:'',sah:'',ve:{one:'n is 1'},af:{one:'n is 1'},vi:'',is:{one:'n is 1'},iu:{two:'n is 2',one:'n is 1'},it:{one:'n is 1'},kn:'',ii:'',ar:{few:'n mod 100 in 3..10',zero:'n is 0',many:'n mod 100 in 11..99',two:'n is 2',one:'n is 1'},zu:{one:'n is 1'},saq:{one:'n is 1'},az:'',tzm:{one:'n in 0..1 or n in 11..99'},id:'',ig:'',pap:{one:'n is 1'},nl:{one:'n is 1'},nn:{one:'n is 1'},no:{one:'n is 1'},nah:{one:'n is 1'},nd:{one:'n is 1'},ne:{one:'n is 1'},ny:{one:'n is 1'},naq:{two:'n is 2',one:'n is 1'},nyn:{one:'n is 1'},kw:{two:'n is 2',one:'n is 1'},nr:{one:'n is 1'},tig:{one:'n is 1'},kab:{one:'n within 0..2 and n is not 2'},mas:{one:'n is 1'},rwk:{one:'n is 1'},kaj:{one:'n is 1'},lag:{zero:'n is 0',one:'n within 0..2 and n is not 0 and n is not 2'},syr:{one:'n is 1'},kk:{one:'n is 1'},ff:{one:'n within 0..2 and n is not 2'},fi:{one:'n is 1'},fo:{one:'n is 1'},ka:'',gsw:{one:'n is 1'},ckb:{one:'n is 1'},ss:{one:'n is 1'},sr:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},sq:{one:'n is 1'},sw:{one:'n is 1'},sv:{one:'n is 1'},km:'',st:{one:'n is 1'},sk:{few:'n in 2..4',one:'n is 1'},sh:{few:'n mod 10 in 2..4 and n mod 100 not in 12..14',many:'n mod 10 is 0 or n mod 10 in 5..9 or n mod 100 in 11..14',one:'n mod 10 is 1 and n mod 100 is not 11'},so:{one:'n is 1'},sn:{one:'n is 1'},ku:{one:'n is 1'},sl:{few:'n mod 100 in 3..4',two:'n mod 100 is 2',one:'n mod 100 is 1'},sg:'',nb:{one:'n is 1'},se:{two:'n is 2',one:'n is 1'}},convertPlural:function(count,forms){var pluralRules,pluralFormIndex=0;if(!forms||forms.length===0){return'';}
pluralRules=this.pluralRules[$.i18n().locale];if(!pluralRules){return(count===1)?forms[0]:forms[1];}
pluralFormIndex=this.getPluralForm(count,pluralRules);pluralFormIndex=Math.min(pluralFormIndex,forms.length-1);return forms[pluralFormIndex];},getPluralForm:function(number,pluralRules){var i,pluralForms=['zero','one','two','few','many','other'],pluralFormIndex=0;for(i=0;i<pluralForms.length;i++){if(pluralRules[pluralForms[i]]){if(pluralRuleParser(pluralRules[pluralForms[i]],number)){return pluralFormIndex;}
pluralFormIndex++;}}
return pluralFormIndex;},'convertNumber':function(num,integer){var tmp,item,i,transformTable,numberString,convertedNumber;transformTable=this.digitTransformTable($.i18n().locale);numberString=''+num;convertedNumber='';if(!transformTable){return num;}
if(integer){if(parseFloat(num,10)===num){return num;}
tmp=[];for(item in transformTable){tmp[transformTable[item]]=item;}
transformTable=tmp;}
for(i=0;i<numberString.length;i++){if(transformTable[numberString[i]]){convertedNumber+=transformTable[numberString[i]];}else{convertedNumber+=numberString[i];}}
return integer?parseFloat(convertedNumber,10):convertedNumber;},convertGrammar:function(word,form){return word;},'gender':function(gender,forms){if(!forms||forms.length===0){return'';}
while(forms.length<2){forms.push(forms[forms.length-1]);}
if(gender==='male'){return forms[0];}
if(gender==='female'){return forms[1];}
return(forms.length===3)?forms[2]:forms[0];},digitTransformTable:function(language){var tables={ar:'٠١٢٣٤٥٦٧٨٩',fa:'۰۱۲۳۴۵۶۷۸۹',ml:'൦൧൨൩൪൫൬൭൮൯',kn:'೦೧೨೩೪೫೬೭೮೯',lo:'໐໑໒໓໔໕໖໗໘໙',or:'୦୧୨୩୪୫୬୭୮୯',kh:'០១២៣៤៥៦៧៨៩',pa:'੦੧੨੩੪੫੬੭੮੯',gu:'૦૧૨૩૪૫૬૭૮૯',hi:'०१२३४५६७८९',my:'၀၁၂၃၄၅၆၇၈၉',ta:'௦௧௨௩௪௫௬௭௮௯',te:'౦౧౨౩౪౫౬౭౮౯',th:'๐๑๒๓๔๕๖๗๘๙',bo:'༠༡༢༣༤༥༦༧༨༩'};if(!tables[language]){return false;}
return tables[language].split('');}};$.extend($.i18n.languages,{'default':language});}(jQuery));;(function(){$(function(){$('@tooltip').tooltip();});})();;var twilio=twilio||{};twilio.modal={init:function(element){if(typeof(element)=='undefined'){var element=$('@views:visible:last');}
if(typeof(element)=='string'){var element=$(element);}
element.trigger('init');},push:function(data,title){var config={element:data};if(typeof(title)!='undefined'){config.title=title;}
$('@view:visible:last').trigger('push',config);},pop:function(relIndex){$('@view:visible:last').trigger('pop',relIndex);},title:function(text){$('@view:visible:last').trigger('title',text);}}
$(function(){"use strict";$(document).on('init','@views',function(){var $this=$(this);$this.on('shown',function(){if(!$this.find('[role="view"]').length){var $body=$this.find('.modal-body'),$footer=$this.find('.modal-footer'),padding=parseInt($body.css('padding-top'),10)
+parseInt($body.css('padding-bottom'),10)
+parseInt($footer.css('padding-top'),10)
+parseInt($footer.css('padding-bottom'),10),border=parseInt($body.css('border-bottom-width'),10)
+parseInt($footer.css('border-top-width'),10),height=$body.height()+$footer.height()+padding+border,$view=$('<div />',{role:'view'}).append($body).append($footer),$win=$('<div />',{role:'view-window',style:'width: 100%; overflow: hidden; position: relative; height: '+height+'px;'}),$wrapper=$('<div />',{role:'view-wrapper',style:'width: 1000000px; position: absolute; left: 0; top: 0;'});$view.data('height',height);$view.data('title',$this.find('.modal-header h4').text());$this.find('.modal-body').remove();$this.find('.modal-footer').remove();$wrapper.append($view);$win.append($wrapper);$this.append($win);$this.data('padding',padding);return false;}else{$this.trigger('refresh');}});if($this.is(':visible')){$this.trigger('shown');}
$this.on('push',function(e,data){if(typeof(data.element)=='undefined'){return false;}
var $wrapper=$this.find('[role="view-wrapper"]');function push(element,type){var $el=$('<div />',{role:'view'});switch(type){case'object':$el.append(element);break;case'html':default:$el.html(element);break;}
if(data.title){$el.data('title',data.title);$this.trigger('title',data.title);}
$wrapper.append($el);$wrapper.animate({left:'-=100%'},500);$el.closest('@views').find('.modal-header').append('<button type="button" class="back hide" role="pop">Back</button>').find('button.back').fadeIn();$this.trigger('refresh');}
if(typeof(data.element)=='object'){push(data.element,'object');}else if(data.element.indexOf('.')==0||data.element.indexOf('#')==0||data.element.indexOf('@')==0){var content=$(data.element).html();push(content);}else if(data.element.indexOf('http')==0||data.element.indexOf('/')==0){var $current=$this.find('[role="view"]:last').addClass('loading');$.get(data.element,function(response){push(response);$current.removeClass('loading');});}else{push(data.element);}});$this.on('pop',function(e,relIndex){var $win=$this.find('[role="view-window"]'),$wrapper=$this.find('[role="view-wrapper"]'),currentElements=$wrapper.find('[role="view"]');if(typeof(relIndex)=='undefined'){relIndex=0;}
if(relIndex>1){for(var i=relIndex;i>1;i--){if(i!=currentElements.length){$(currentElements[i-1]).remove();}}
var left=parseInt($wrapper.css('left'),10)/100;$wrapper.css({left:((left+relIndex-1)*100)+'%'});}
currentElements=$wrapper.find('[role="view"]');var $previous=$(currentElements[currentElements.length-2]),height=$previous.data('height');if(currentElements.length<2){return false;}
if(currentElements.length==2){$wrapper.closest('@views').find('button.back').fadeOut(function(){$(this).remove();});}
$wrapper.animate({left:'+=100%'},function(){$(currentElements[currentElements.length-1]).remove();});if($previous.data('title')){$this.trigger('title',$previous.data('title'));}
$win.animate({height:height+'px'},400);});$this.on('title',function(e,data){var $header=$this.find('.modal-header h4');if(!data||$header.text()==data){return false;}
$header.animate({opacity:0},function(){$header.text(data).animate({opacity:1});});});$this.on('refresh',function(){var $currentView=$this.find('@view:last'),$win=$this.find('@view-window'),$wrapper=$this.find('@view-wrapper'),padding=$this.data('padding'),height=$currentView.height();$win.animate({height:height+'px'},400);$currentView.data('height',height);});});$('@views').each(function(){$(this).trigger('init');});$('@modal').on('hidden',function(){$('@views').each(function(){var $this=$(this),$wrapper=$this.find('@view-wrapper').css({left:'0%'}),$views=$this.find('@view:gt(0)').remove(),$view=$this.find('@view'),$win=$this.find('@view-window').css({height:$view.data('height')}),$header=$this.find('.modal-header h4').text($view.data('title'));});});$(document).on('click','a@modal',function(){var $this=$(this).addClass('disabled');$.get($(this).attr('href'),function(res){var id=Math.floor(Math.random()*1001),$wrapper=$('<div />',{'class':'modal fade hide','tabindex':'-1','role':'modal views','id':id,'html':res});$('body').append($wrapper);$('#'+id).modal().trigger('shown');twilio.modal.init();$this.removeClass('disabled');});return false;});$(document).on('click','[data-push]',function(){twilio.modal.push($(this).data('push'),$(this).data('title'));return false;});$(document).on('click','@pop',function(){var rel=$(this).data('relindex');twilio.modal.pop(rel);return false;});});;$(function(){$(document).on('click','@announcement a, @announcement button',function(){var $div=$(this).parents('@announcement');var expires=$div.data('expires');var name=$div.attr('name');$.cookie('tw-announcement-'+name,1,{expires:new Date(expires*1000),path:'/'});});});;(function($){$.fn.jqm=function(o){var p={overlay:50,overlayClass:'jqmOverlay',closeClass:'jqmClose',trigger:'.jqModal',ajax:F,ajaxText:'',target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,o);s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass('jqmID'+s),s:s};if(p.trigger)$(this).jqmAddTrigger(p.trigger);});};$.fn.jqmAddClose=function(e){return hs(this,e,'jqmHide');};$.fn.jqmAddTrigger=function(e){return hs(this,e,'jqmShow');};$.fn.jqmShow=function(t){return this.each(function(){t=t||window.event;$.jqm.open(this._jqm,t);});};$.fn.jqmHide=function(t){return this.each(function(){t=t||window.event;$.jqm.close(this._jqm,t)});};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc='.'+c.closeClass,z=(parseInt(h.w.css('z-index'))),z=(z>0)?z:3000,o=$('<div></div>').css({height:'100%',width:'100%',position:'fixed',left:0,top:0,'z-index':z-1,opacity:c.overlay/100});if(h.a)return F;h.t=t;h.a=true;h.w.css('z-index',z);if(c.modal){if(!A[0])L('bind');A.push(s);}else if(c.overlay>0)h.w.jqmAddClose(o);else o=F;h.o=(o)?o.addClass(c.overlayClass).prependTo('body'):F;if(ie6){$('html,body').css({height:'100%',width:'100%'});if(o){o=o.css({position:'absolute'})[0];for(var y in{Top:1,Left:1})o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'");}}
if(c.ajax){var r=c.target||h.w,u=c.ajax,r=(typeof r=='string')?$(r,h.w):$(r),u=(u.substr(0,1)=='@')?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad)c.onLoad.call(this,h);if(cc)h.w.jqmAddClose($(cc,h.w));e(h);});}else if(cc)h.w.jqmAddClose($(cc,h.w));if(c.toTop&&h.o)h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o);(c.onShow)?c.onShow(h):h.w.show();e(h);return F;},close:function(s){var h=H[s];if(!h.a)return F;h.a=F;if(A[0]){A.pop();if(!A[0])L('unbind');}
if(h.c.toTop&&h.o)$('#jqmP'+h.w[0]._jqm).after(h.w).remove();if(h.c.onHide)h.c.onHide(h);else{h.w.hide();if(h.o)h.o.remove();}
return F;},params:{}};var s=0,H=$.jqm.hash,A=[],ie6=$.browser.msie&&($.browser.version=="6.0"),F=false,i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),e=function(h){if(ie6)if(h.o)h.o.html('<p style="width:100%;height:100%"/>').prepend(i);else if(!$('iframe.jqm',h.w)[0])h.w.prepend(i);f(h);},f=function(h){try{$(':input:visible',h.w)[0].focus();}catch(_){}},L=function(t){$()[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m);},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)f(h);return!r;},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})for(var s in this[i])if(H[this[i][s]])H[this[i][s]].w[i](this);return F;});}
this[c].push(s);});});};})(jQuery);;(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}
this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)
settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)
return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)
this.element(element);else if(element.parentNode.name in this.submitted)
this.element(element.parentNode);},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}
$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler)
$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())
$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)
$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}
var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}
if(dependencyMismatch)
return;if(this.objectLength(rules))
this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)
return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return /radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=false;if($.isFunction(param.valid)){response=param.valid(response);}
valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=(previous.message=response||validator.defaultMessage(element,"remote"));errors[element.name]=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}
return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^(-|\+)?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))
return"dependency-mismatch";value=value.replace(/\s+/g,"");if(/[^0-9-]+/.test(value))
return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)
nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);;if(jQuery)(function($){$.extend($.fn,{selectBox:function(method,data){var typeTimer,typeSearch='';var init=function(select,data){if(navigator.userAgent.match(/iPad|iPhone|Android/i))return false;if(select.tagName.toLowerCase()!=='select')return false;select=$(select);if(select.data('selectBox-control'))return false;var control=$('<a class="selectBox" />'),inline=select.attr('multiple')||parseInt(select.attr('size'))>1;var settings=data||{};if(settings.autoWidth===undefined)settings.autoWidth=true;control.addClass(select.attr('class')).attr('style',select.attr('style')||'').attr('title',select.attr('title')||'').attr('tabindex',parseInt(select.attr('tabindex'))).css('display','inline-block').bind('focus.selectBox',function(){if(this!==document.activeElement)$(document.activeElement).blur();if(control.hasClass('selectBox-active'))return;control.addClass('selectBox-active');select.trigger('focus');}).bind('blur.selectBox',function(){if(!control.hasClass('selectBox-active'))return;control.removeClass('selectBox-active');select.trigger('blur');});if(select.attr('disabled'))control.addClass('selectBox-disabled');if(inline){var options=getOptions(select,'inline');control.append(options).data('selectBox-options',options).addClass('selectBox-inline').addClass('selectBox-menuShowing').bind('keydown.selectBox',function(event){handleKeyDown(select,event);}).bind('keypress.selectBox',function(event){handleKeyPress(select,event);}).bind('mousedown.selectBox',function(event){if($(event.target).is('A.selectBox-inline'))event.preventDefault();if(!control.hasClass('selectBox-focus'))control.focus();}).insertAfter(select);if(!select[0].style.height){var size=select.attr('size')?parseInt(select.attr('size')):5;var tmp=control.clone().removeAttr('id').css({position:'absolute',top:'-9999em'}).show().appendTo('body');tmp.find('.selectBox-options').html('<li><a>\u00A0</a></li>');optionHeight=parseInt(tmp.find('.selectBox-options A:first').html('&nbsp;').outerHeight());tmp.remove();control.height(optionHeight*size);}
disableSelection(control);}else{var label=$('<span class="selectBox-label" />'),arrow=$('<span class="selectBox-arrow" />');label.text($(select).find('OPTION:selected').text()||'\u00A0');var options=getOptions(select,'dropdown');options.appendTo('BODY');control.data('selectBox-options',options).addClass('selectBox-dropdown').append(label).append(arrow).bind('mousedown.selectBox',function(event){if(control.hasClass('selectBox-menuShowing')){hideMenus();}else{event.stopPropagation();options.data('selectBox-down-at-x',event.screenX).data('selectBox-down-at-y',event.screenY);showMenu(select);}}).bind('keydown.selectBox',function(event){handleKeyDown(select,event);}).bind('keypress.selectBox',function(event){handleKeyPress(select,event);}).insertAfter(select);disableSelection(control);}
select.addClass('selectBox').data('selectBox-control',control).data('selectBox-settings',settings).hide();};var getOptions=function(select,type){var options;switch(type){case'inline':options=$('<ul class="selectBox-options" />');if(select.find('OPTGROUP').length){select.find('OPTGROUP').each(function(){var optgroup=$('<li class="selectBox-optgroup" />');optgroup.text($(this).attr('label'));options.append(optgroup);$(this).find('OPTION').each(function(){var li=$('<li />'),a=$('<a />');li.addClass($(this).attr('class'));a.attr('rel',$(this).val()).text($(this).text());li.append(a);if($(this).attr('disabled'))li.addClass('selectBox-disabled');if($(this).attr('selected'))li.addClass('selectBox-selected');options.append(li);});});}else{select.find('OPTION').each(function(){var li=$('<li />'),a=$('<a />');li.addClass($(this).attr('class'));a.attr('rel',$(this).val()).text($(this).text());li.append(a);if($(this).attr('disabled'))li.addClass('selectBox-disabled');if($(this).attr('selected'))li.addClass('selectBox-selected');options.append(li);});}
options.find('A').bind('mouseover.selectBox',function(event){addHover(select,$(this).parent());}).bind('mouseout.selectBox',function(event){removeHover(select,$(this).parent());}).bind('mousedown.selectBox',function(event){event.preventDefault();if(!select.selectBox('control').hasClass('selectBox-active'))select.selectBox('control').focus();}).bind('mouseup.selectBox',function(event){hideMenus();selectOption(select,$(this).parent(),event);});disableSelection(options);return options;case'dropdown':options=$('<ul class="selectBox-dropdown-menu selectBox-options" />');if(select.find('OPTGROUP').length){select.find('OPTGROUP').each(function(){var optgroup=$('<li class="selectBox-optgroup" />');optgroup.text($(this).attr('label'));options.append(optgroup);$(this).find('OPTION').each(function(){var li=$('<li />'),a=$('<a />');li.addClass($(this).attr('class'));a.attr('rel',$(this).val()).text($(this).text());li.append(a);if($(this).attr('disabled'))li.addClass('selectBox-disabled');if($(this).attr('selected'))li.addClass('selectBox-selected');options.append(li);});});}else{if(select.find('OPTION').length>0){select.find('OPTION').each(function(){var li=$('<li />'),a=$('<a />');li.addClass($(this).attr('class'));a.attr('rel',$(this).val()).text($(this).text());li.append(a);if($(this).attr('disabled'))li.addClass('selectBox-disabled');if($(this).attr('selected'))li.addClass('selectBox-selected');options.append(li);});}else{options.append('<li>\u00A0</li>');}}
options.data('selectBox-select',select).css('display','none').appendTo('BODY').find('A').bind('mousedown.selectBox',function(event){event.preventDefault();if(event.screenX===options.data('selectBox-down-at-x')&&event.screenY===options.data('selectBox-down-at-y')){options.removeData('selectBox-down-at-x').removeData('selectBox-down-at-y');hideMenus();}}).bind('mouseup.selectBox',function(event){if(event.screenX===options.data('selectBox-down-at-x')&&event.screenY===options.data('selectBox-down-at-y')){return;}else{options.removeData('selectBox-down-at-x').removeData('selectBox-down-at-y');}
selectOption(select,$(this).parent());hideMenus();}).bind('mouseover.selectBox',function(event){addHover(select,$(this).parent());}).bind('mouseout.selectBox',function(event){removeHover(select,$(this).parent());});disableSelection(options);return options;}};var destroy=function(select){select=$(select);var control=select.data('selectBox-control');if(!control)return;var options=control.data('selectBox-options');options.remove();control.remove();select.removeClass('selectBox').removeData('selectBox-control').removeData('selectBox-settings').show();};var showMenu=function(select){select=$(select);var control=select.data('selectBox-control'),settings=select.data('selectBox-settings'),options=control.data('selectBox-options');if(control.hasClass('selectBox-disabled'))return false;hideMenus();if(settings.autoWidth)options.css('width',control.outerWidth()-(parseInt(control.css('borderLeftWidth'))+parseInt(control.css('borderLeftWidth'))));options.css({top:control.offset().top+control.outerHeight()-(parseInt(control.css('borderBottomWidth'))),left:control.offset().left});switch(settings.menuTransition){case'fade':options.fadeIn(settings.menuSpeed);break;case'slide':options.slideDown(settings.menuSpeed);break;default:options.show(settings.menuSpeed);break;}
var li=options.find('.selectBox-selected:first');keepOptionInView(select,li,true);addHover(select,li);control.addClass('selectBox-menuShowing');$(document).bind('mousedown.selectBox',function(event){if($(event.target).parents().andSelf().hasClass('selectBox-options'))return;hideMenus();});};var hideMenus=function(){if($(".selectBox-dropdown-menu").length===0)return;$(document).unbind('mousedown.selectBox');$(".selectBox-dropdown-menu").each(function(){var options=$(this),select=options.data('selectBox-select'),control=select.data('selectBox-control'),settings=select.data('selectBox-settings');switch(settings.menuTransition){case'fade':options.fadeOut(settings.menuSpeed);break;case'slide':options.slideUp(settings.menuSpeed);break;default:options.hide(settings.menuSpeed);break;}
control.removeClass('selectBox-menuShowing');});};var selectOption=function(select,li,event){select=$(select);li=$(li);var control=select.data('selectBox-control'),settings=select.data('selectBox-settings');if(control.hasClass('selectBox-disabled'))return false;if(li.length===0||li.hasClass('selectBox-disabled'))return false;if(select.attr('multiple')){if(event.shiftKey&&control.data('selectBox-last-selected')){li.toggleClass('selectBox-selected');var affectedOptions;if(li.index()>control.data('selectBox-last-selected').index()){affectedOptions=li.siblings().slice(control.data('selectBox-last-selected').index(),li.index());}else{affectedOptions=li.siblings().slice(li.index(),control.data('selectBox-last-selected').index());}
affectedOptions=affectedOptions.not('.selectBox-optgroup, .selectBox-disabled');if(li.hasClass('selectBox-selected')){affectedOptions.addClass('selectBox-selected');}else{affectedOptions.removeClass('selectBox-selected');}}else if(event.metaKey){li.toggleClass('selectBox-selected');}else{li.siblings().removeClass('selectBox-selected');li.addClass('selectBox-selected');}}else{li.siblings().removeClass('selectBox-selected');li.addClass('selectBox-selected');}
if(control.hasClass('selectBox-dropdown')){control.find('.selectBox-label').text(li.text());}
var i=0,selection=[];if(select.attr('multiple')){control.find('.selectBox-selected A').each(function(){selection[i++]=$(this).attr('rel');});}else{selection=li.find('A').attr('rel');}
control.data('selectBox-last-selected',li);if(select.val()!==selection){select.val(selection);select.trigger('change');}
return true;};var addHover=function(select,li){select=$(select);li=$(li);var control=select.data('selectBox-control'),options=control.data('selectBox-options');options.find('.selectBox-hover').removeClass('selectBox-hover');li.addClass('selectBox-hover');};var removeHover=function(select,li){select=$(select);li=$(li);var control=select.data('selectBox-control'),options=control.data('selectBox-options');options.find('.selectBox-hover').removeClass('selectBox-hover');};var keepOptionInView=function(select,li,center){if(!li||li.length===0)return;select=$(select);var control=select.data('selectBox-control'),options=control.data('selectBox-options'),scrollBox=control.hasClass('selectBox-dropdown')?options:options.parent(),top=parseInt(li.offset().top-scrollBox.position().top),bottom=parseInt(top+li.outerHeight());if(center){scrollBox.scrollTop(li.offset().top-scrollBox.offset().top+scrollBox.scrollTop()-(scrollBox.height()/2));}else{if(top<0){scrollBox.scrollTop(li.offset().top-scrollBox.offset().top+scrollBox.scrollTop());}
if(bottom>scrollBox.height()){scrollBox.scrollTop((li.offset().top+li.outerHeight())-scrollBox.offset().top+scrollBox.scrollTop()-scrollBox.height());}}};var handleKeyDown=function(select,event){select=$(select);var control=select.data('selectBox-control'),options=control.data('selectBox-options'),totalOptions=0,i=0;if(control.hasClass('selectBox-disabled'))return;switch(event.keyCode){case 8:event.preventDefault();typeSearch='';break;case 9:case 27:hideMenus();removeHover(select);break;case 13:if(control.hasClass('selectBox-menuShowing')){selectOption(select,options.find('LI.selectBox-hover:first'),event);if(control.hasClass('selectBox-dropdown'))hideMenus();}else{showMenu(select);}
break;case 38:case 37:event.preventDefault();if(control.hasClass('selectBox-menuShowing')){var prev=options.find('.selectBox-hover').prev('LI');totalOptions=options.find('LI:not(.selectBox-optgroup)').length;i=0;while(prev.length===0||prev.hasClass('selectBox-disabled')||prev.hasClass('selectBox-optgroup')){prev=prev.prev('LI');if(prev.length===0)prev=options.find('LI:last');if(++i>=totalOptions)break;}
addHover(select,prev);keepOptionInView(select,prev);}else{showMenu(select);}
break;case 40:case 39:event.preventDefault();if(control.hasClass('selectBox-menuShowing')){var next=options.find('.selectBox-hover').next('LI');totalOptions=options.find('LI:not(.selectBox-optgroup)').length;i=0;while(next.length===0||next.hasClass('selectBox-disabled')||next.hasClass('selectBox-optgroup')){next=next.next('LI');if(next.length===0)next=options.find('LI:first');if(++i>=totalOptions)break;}
addHover(select,next);keepOptionInView(select,next);}else{showMenu(select);}
break;}};var handleKeyPress=function(select,event){select=$(select);var control=select.data('selectBox-control'),options=control.data('selectBox-options');if(control.hasClass('selectBox-disabled'))return;switch(event.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:if(!control.hasClass('selectBox-menuShowing'))showMenu(select);event.preventDefault();clearTimeout(typeTimer);typeSearch+=String.fromCharCode(event.charCode||event.keyCode);options.find('A').each(function(){if($(this).text().substr(0,typeSearch.length).toLowerCase()===typeSearch.toLowerCase()){addHover(select,$(this).parent());keepOptionInView(select,$(this).parent());return false;}});typeTimer=setTimeout(function(){typeSearch='';},1000);break;}};var enable=function(select){select=$(select);select.attr('disabled',false);var control=select.data('selectBox-control');if(!control)return;control.removeClass('selectBox-disabled');};var disable=function(select){select=$(select);select.attr('disabled',true);var control=select.data('selectBox-control');if(!control)return;control.addClass('selectBox-disabled');};var setValue=function(select,value){select=$(select);select.val(value);value=select.val();var control=select.data('selectBox-control');if(!control)return;var settings=select.data('selectBox-settings'),options=control.data('selectBox-options');control.find('.selectBox-label').text($(select).find('OPTION:selected').text()||'\u00A0');options.find('.selectBox-selected').removeClass('selectBox-selected');options.find('A').each(function(){if(typeof(value)==='object'){for(var i=0;i<value.length;i++){if($(this).attr('rel')==value[i]){$(this).parent().addClass('selectBox-selected');}}}else{if($(this).attr('rel')==value){$(this).parent().addClass('selectBox-selected');}}});if(settings.change)settings.change.call(select);};var setOptions=function(select,options){select=$(select);var control=select.data('selectBox-control'),settings=select.data('selectBox-settings');switch(typeof(data)){case'string':select.html(data);break;case'object':select.html('');for(var i in data){if(data[i]===null)continue;if(typeof(data[i])==='object'){var optgroup=$('<optgroup label="'+i+'" />');for(var j in data[i]){optgroup.append('<option value="'+j+'">'+data[i][j]+'</option>');}
select.append(optgroup);}else{var option=$('<option value="'+i+'">'+data[i]+'</option>');select.append(option);}}
break;}
if(!control)return;control.data('selectBox-options').remove();var type=control.hasClass('selectBox-dropdown')?'dropdown':'inline',options=getOptions(select,type);control.data('selectBox-options',options);switch(type){case'inline':control.append(options);break;case'dropdown':control.find('.selectBox-label').text($(select).find('OPTION:selected').text()||'\u00A0');$("BODY").append(options);break;}};var disableSelection=function(selector){$(selector).css('MozUserSelect','none').bind('selectstart',function(event){event.preventDefault();});};switch(method){case'control':return $(this).data('selectBox-control');break;case'settings':if(!data)return $(this).data('selectBox-settings');$(this).each(function(){$(this).data('selectBox-settings',$.extend(true,$(this).data('selectBox-settings'),data));});break;case'options':$(this).each(function(){setOptions(this,data);});break;case'value':if(typeof(data)==='undefined')return $(this).val();$(this).each(function(){setValue(this,data);});break;case'enable':$(this).each(function(){enable(this);});break;case'disable':$(this).each(function(){disable(this);});break;case'destroy':$(this).each(function(){destroy(this);});break;default:$(this).each(function(){init(this,method);});break;}
return $(this);}});})(jQuery);;(function($,window,undefined){'use strict';var MessageStore=function(){this.messages={};this.sources={};this.locale=String.locale;};MessageStore.prototype={init:function(locale){var messageStore=this;messageStore.locale=locale;messageStore.log('initializing for '+locale);$('link').each(function(index,element){var $link=$(element),rel=($link.attr('rel')||'').toLowerCase().split(/\s+/);if($.inArray('localizations',rel)!==-1){messageStore.load($link.attr('href'));}else if($.inArray('localization',rel)!==-1){messageStore.queue(($link.attr('hreflang')||'').toLowerCase(),$link.attr('href'));}});},load:function(data,locale){var key=null,messageStore=this,hasOwn=Object.prototype.hasOwnProperty;if(!data){messageStore.log('Resetting for locale '+locale);messageStore.messages={};return;}
if(typeof data==='string'){messageStore.log('Loading messages from: '+data);messageStore.jsonMessageLoader(data).done(function(localization,textStatus){messageStore.load(localization,locale);messageStore.queue(locale,data);messageStore.markLoaded(locale,data);});}else{for(key in data){if(hasOwn.call(data,key)){if(locale){if(!messageStore.messages[locale]){messageStore.messages[locale]={};}
messageStore.messages[locale][key]=data[key];messageStore.log('['+locale+']['+key+'] : '+data[key]);}else{messageStore.load(data[key],key);}}}}},log:function(){if(window.console&&$.i18n.debug){window.console.log.apply(window.console,arguments);}},markLoaded:function(locale,messageLocation){var i,queue=this.sources[locale];if(!queue){this.queue(locale,messageLocation);queue=this.sources[locale];}
this.sources[locale]=this.sources[locale]||[];for(i=0;i<queue.length;i++){if(queue[i].source.url===messageLocation){queue[i].source.loaded=true;return;}}},queue:function(locale,messageLocation){var i,queue=this.sources[locale];this.sources[locale]=this.sources[locale]||[];if(queue){for(i=0;i<queue.length;i++){if(queue[i].source.url===messageLocation){return;}}}
this.log('Source for: '+locale+' is '+messageLocation+' registered');this.sources[locale].push({source:{url:messageLocation,loaded:false}});},loadFromQueue:function(locale){var i,queue=this.sources[locale];if(queue){for(i=0;i<queue.length;i++){if(!queue[i].source.loaded){this.load(queue[i].source.url,locale);this.sources[locale][i].source.loaded=true;}}}},isLoaded:function(locale,messageLocation){var i,sources=this.sources[locale],result=false;if(sources){for(i=0;i<sources.length;i++){if(sources[i].source.url===messageLocation){result=true;}}}
return result;},jsonMessageLoader:function(url){var messageStore=this;return $.ajax({url:url,dataType:'json',async:false}).fail(function(jqxhr,settings,exception){messageStore.log('Error in loading messages from '+url+' Exception: '+exception);});},get:function(locale,messageKey){if(!this.messages[locale]){this.loadFromQueue(locale);}
return this.messages[locale]&&this.messages[locale][messageKey];}};$.extend($.i18n.messageStore,new MessageStore());}(jQuery,window));;$(function(){var csrfToken=$('meta[name="csrfToken"]').attr('content');var hidden=$('<input type="hidden" name="CSRF" />').val(csrfToken);$('form').each(function(){if($(this).find('input[name="CSRF"]').length==0){$(this).append(hidden);}});});$.ajaxPrefilter(function(options){var csrfToken='CSRF='+encodeURIComponent($('meta[name="csrfToken"]').attr('content'));if('data'in options){options.data+='&'+csrfToken;}else{options.data=csrfToken;}});;$(function(){$('@redirect').on('click',function(e){if($(this).data('url')){window.location=$(this).data('url');return false;}});});;jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var result,decode=options.raw?function(s){return s;}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null;};;if(top!==self){$('html').on('click','a:not([href^="/user/account"]):not([href^="/shortcode"]):not([href^="#"])',function(){$(this).attr('target','_blank');});};!function($){function rewriteSelector(context,name,argPos){var original=context[name];if(!original)return;context[name]=function(){arguments[argPos]=arguments[argPos].replace(/@([\w\u00c0-\uFFFF\-]+)/g,'[role~="$1"]');return original.apply(context,arguments);};$.extend(context[name],original);}
rewriteSelector($,'find',0);rewriteSelector($,'multiFilter',0);rewriteSelector($.find,'matchesSelector',1);rewriteSelector($.find,'matches',0);function parse(roleString,without){var role,result=[],roles=$.trim(roleString).split(/\s+/);for(var i=0;i<roles.length;i++){role=roles[i];if(!~$.inArray(role,result)&&(!without||!~$.inArray(role,without)))
result.push(role);}
return result;};$.extend($.fn,{roles:function(){return parse(this.attr('role'));},hasRole:function(roleName){var roles=parse(roleName);for(var i=0;i<roles.length;i++)
if(!this.is('@'+roles[i]))return false;return true;},addRole:function(roleName){if(this.hasRole(roleName))return this;return this.each(function(_,element){var $el=$(element);$el.attr('role',parse($el.attr('role')+' '+roleName).join(' '));});},removeRole:function(roleName){if(!this.hasRole(roleName))return this;return this.each(function(_,element){var $el=$(element);$el.attr('role',parse($el.attr('role'),parse(roleName)).join(' '));});},toggleRole:function(roleName){var roles=parse(roleName);for(var i=0;i<roles.length;i++)
this[this.hasRole(roles[i])?'removeRole':'addRole'].call(this,roles[i]);return this;}});}(jQuery);$(function(){$(document).on('mousedown','@avatar-choice:not([data-disabled])',function(){$(this).toggleClass('open');});$(document).on('mousedown','@avatar',function(){var $this=$(this),$chooser=$this.closest('@avatar-choice'),image=$this.css('background-image'),imageUrl=image.replace(/(url\(['"]?)?([^)"']+)(['"]?\))/,'$2');$chooser.removeClass('open').css({'background-image':image});$chooser.find('input:hidden').val(imageUrl);return false;});});;$(function(){$('@account').each(function(){var $this=$(this),$title=$this.find('h3'),$avatar=$this.find('@avatar');$this.on('keydown','input',function(e){if($this.hasClass('editing')&&e.keyCode==27){$this.trigger('close');}});$this.on('close',function(save){$this.find('@edit').text('Edit');$this.removeClass('editing').data('disabled','');var $input=$this.find('input:visible')
var text=$input.val(),$h3=$('<h3 />',{text:text});$input.after($h3).remove();$title=$h3;var $avatar=$this.find('.avatar').attr('disabled','disabled'),value=$avatar.find('input:hidden').val();$avatar.find('input').remove();$avatar.find('ul').remove();var accountSid=$this.data('sid');$this.find('@avatar-choice').removeClass('open');if(save){$.post('/user/account/settings/'+accountSid,{friendlyName:text,avatar:value});}});$this.find('@edit').on('click',function(e){if($this.hasClass('editing')){$this.trigger('close',true);}else{$(this).text('Save');$this.addClass('editing').data('disabled','disabled');var text=$title.text(),$input=$('<input />',{val:text});$title.after($input).remove();$input.focus().on('keyup',function(e){if(e.keyCode==13){$this.closest('.editing').find('@edit').trigger('click');}});var $avatar=$this.find('.avatar').removeAttr('data-disabled'),$hidden=$('<input />',{type:'hidden'}),$ul=$('<ul />');$avatar.append($hidden).append($ul);for(var i=0;i<16;i++){var j=i+1,index=(j<10)?"0"+j:j,$a=$('<a />',{'class':"avatar-"+index,role:'avatar',href:'#'}),$li=$('<li />');$li.append($a);$ul.append($li);}}
return false;});$this.on('click',function(){if($this.hasClass('editing')){return false;}});});});;(function($,undefined){'use strict';$.i18n=$.i18n||{};$.i18n.fallbacks={'ab':['ru'],'ace':['id'],'aln':['sq'],'als':['gsw','de'],'an':['es'],'anp':['hi'],'arn':['es'],'arz':['ar'],'av':['ru'],'ay':['es'],'ba':['ru'],'bar':['de'],'bat-smg':['sgs','lt'],'bcc':['fa'],'be-x-old':['be-tarask'],'bh':['bho'],'bjn':['id'],'bm':['fr'],'bpy':['bn'],'bqi':['fa'],'bug':['id'],'cbk-zam':['es'],'ce':['ru'],'crh':['crh-latn'],'crh-cyrl':['ru'],'csb':['pl'],'cv':['ru'],'de-at':['de'],'de-ch':['de'],'de-formal':['de'],'dsb':['de'],'dtp':['ms'],'egl':['it'],'eml':['it'],'ff':['fr'],'fit':['fi'],'fiu-vro':['vro','et'],'frc':['fr'],'frp':['fr'],'frr':['de'],'fur':['it'],'gag':['tr'],'gan':['gan-hant','zh-hant','zh-hans'],'gan-hans':['zh-hans'],'gan-hant':['zh-hant','zh-hans'],'gl':['pt'],'glk':['fa'],'gn':['es'],'gsw':['de'],'hif':['hif-latn'],'hsb':['de'],'ht':['fr'],'ii':['zh-cn','zh-hans'],'inh':['ru'],'iu':['ike-cans'],'jut':['da'],'jv':['id'],'kaa':['kk-latn','kk-cyrl'],'kbd':['kbd-cyrl'],'khw':['ur'],'kiu':['tr'],'kk':['kk-cyrl'],'kk-arab':['kk-cyrl'],'kk-latn':['kk-cyrl'],'kk-cn':['kk-arab','kk-cyrl'],'kk-kz':['kk-cyrl'],'kk-tr':['kk-latn','kk-cyrl'],'kl':['da'],'ko-kp':['ko'],'koi':['ru'],'krc':['ru'],'ks':['ks-arab'],'ksh':['de'],'ku':['ku-latn'],'ku-arab':['ckb'],'kv':['ru'],'lad':['es'],'lb':['de'],'lbe':['ru'],'lez':['ru'],'li':['nl'],'lij':['it'],'liv':['et'],'lmo':['it'],'ln':['fr'],'ltg':['lv'],'lzz':['tr'],'mai':['hi'],'map-bms':['jv','id'],'mg':['fr'],'mhr':['ru'],'min':['id'],'mo':['ro'],'mrj':['ru'],'mwl':['pt'],'myv':['ru'],'mzn':['fa'],'nah':['es'],'nap':['it'],'nds':['de'],'nds-nl':['nl'],'nl-informal':['nl'],'no':['nb'],'os':['ru'],'pcd':['fr'],'pdc':['de'],'pdt':['de'],'pfl':['de'],'pms':['it'],'pt':['pt-br'],'pt-br':['pt'],'qu':['es'],'qug':['qu','es'],'rgn':['it'],'rmy':['ro'],'roa-rup':['rup'],'rue':['uk','ru'],'ruq':['ruq-latn','ro'],'ruq-cyrl':['mk'],'ruq-latn':['ro'],'sa':['hi'],'sah':['ru'],'scn':['it'],'sg':['fr'],'sgs':['lt'],'sli':['de'],'sr':['sr-ec'],'srn':['nl'],'stq':['de'],'su':['id'],'szl':['pl'],'tcy':['kn'],'tg':['tg-cyrl'],'tt':['tt-cyrl','ru'],'tt-cyrl':['ru'],'ty':['fr'],'udm':['ru'],'ug':['ug-arab'],'uk':['ru'],'vec':['it'],'vep':['et'],'vls':['nl'],'vmf':['de'],'vot':['fi'],'vro':['et'],'wa':['fr'],'wo':['fr'],'wuu':['zh-hans'],'xal':['ru'],'xmf':['ka'],'yi':['he'],'za':['zh-hans'],'zea':['nl'],'zh':['zh-hans'],'zh-classical':['lzh'],'zh-cn':['zh-hans'],'zh-hant':['zh-hans'],'zh-hk':['zh-hant','zh-hans'],'zh-min-nan':['nan'],'zh-mo':['zh-hk','zh-hant','zh-hans'],'zh-my':['zh-sg','zh-hans'],'zh-sg':['zh-hans'],'zh-tw':['zh-hant','zh-hans'],'zh-yue':['yue']};}(jQuery));;(function(e){function o(){if(r)return;e("form").live("reset",function(){e(this).find("."+t).each(f)}),e("."+t).live("keydown",a).live("mousedown",a).live("mouseup",a).live("mouseclick",a).live("focus",a).live("focusin",a).live("blur",f).live("focusout",f).live("change",u),e("."+n).live("click",function(){e(e(this).data(t)).focus()}).live("mouseup",function(){e(e(this).data(t)).focus()}),bound=!0,r=!0}function u(){var r=e(this);if(!!r.val()){e(r.data(n)).hide();return}r.data(t+"FOCUSED")!=1&&l(r)}function a(){e(e(this).data(t+"FOCUSED",1).data(n)).hide()}function f(){var n=this;l(e(this).removeData(t+"FOCUSED")),setTimeout(function(){var r=e(n);r.data(t+"FOCUSED")!=1&&l(r)},200)}function l(t,r){var i=e(t.data(n));(r||i.css("display")=="none")&&!t.val()&&i.text(t.attr("placeholder")).css("top",t.position().top+"px").css("left",t.position().left+"px").css("display","block")}function h(){c&&window.clearTimeout(c),c=window.setTimeout(p,50)}function p(){e("."+t).each(function(){var n=e(this),r=e(this).data(t+"FOCUSED");r||l(n,!0)})}var t="PLACEHOLDER-INPUT",n="PLACEHOLDER-LABEL",r=!1,i={labelClass:"placeholder"},s=document.createElement("input");if("placeholder"in s){e.fn.placeholder=e.fn.unplaceholder=function(){},delete s;return}delete s,e(window).resize(h),e.fn.placeholder=function(r){o();var s=e.extend(i,r);this.each(function(){var r=Math.random().toString(32).replace(/\./,""),i=e(this),o=e('<label style="position:absolute;display:none;top:0;left:0;"></label>');if(!i.attr("placeholder")||i.data(t)===t)return;i.attr("id")||i.attr("id","input_"+r),o.attr("id",i.attr("id")+"_placeholder").data(t,"#"+i.attr("id")).attr("for",i.attr("id")).addClass(s.labelClass).addClass(s.labelClass+"-for-"+this.tagName.toLowerCase()).addClass(n).text(i.attr("placeholder")),i.data(n,"#"+o.attr("id")).data(t,t).addClass(t).after(o),a.call(this),f.call(this)})},e.fn.unplaceholder=function(){this.each(function(){var r=e(this),i=e(r.data(n));if(r.data(t)!==t)return;i.remove(),r.removeData(t).removeData(n).removeClass(t).unbind("change",u)})};var c})(jQuery);